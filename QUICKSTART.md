# PWA プッシュ通知 クイックスタートガイド

## 🚀 5 分で始める通知機能

### 1. プロジェクトのセットアップ

```bash
# 依存関係をインストール
npm install

# VAPID鍵を生成
npx web-push generate-vapid-keys
```

### 2. 環境変数の設定

`.env.local` ファイルを作成：

```env
VAPID_PUBLIC_KEY=生成された公開鍵
VAPID_PRIVATE_KEY=生成された秘密鍵
```

### 3. 開発サーバー起動

```bash
npm run dev
```

### 4. 通知機能のテスト

1. ブラウザで `http://localhost:3000` にアクセス
2. 「通知を許可する」ボタンをクリック
3. ブラウザの通知許可ダイアログで「許可」を選択
4. 「通知を送信」ボタンをクリック
5. デスクトップに通知が表示されることを確認

## 📱 主要機能

### ✅ 実装済み機能

- [x] 通知許可の要求と管理
- [x] Service Worker 登録
- [x] プッシュ通知の購読
- [x] サーバーサイドからの通知送信
- [x] リッチな通知表示（アイコン、画像、アクション）
- [x] 通知クリック時のアプリ起動
- [x] 購読状況の管理

### 🔧 技術仕様

- **フレームワーク**: Next.js 15 + React 19
- **言語**: TypeScript
- **プッシュ通知**: Web Push API
- **ライブラリ**: web-push
- **スタイリング**: Tailwind CSS

## 🛠️ 開発者向け情報

### ディレクトリ構造

```
src/
├── app/api/push/          # プッシュ通知API
├── components/            # React コンポーネント
├── hooks/                 # カスタムフック
├── utils/                 # ユーティリティ
└── public/sw.js          # Service Worker
```

### 主要な API

- `POST /api/push/subscribe` - 購読登録
- `POST /api/push/send` - 通知送信
- `GET /api/push/subscribe` - 購読状況確認

## 🐛 トラブルシューティング

### よくある問題

**Q: 通知が表示されない**
A: 以下を確認してください：

- HTTPS 環境で動作しているか
- ブラウザの通知許可が「許可」になっているか
- Service Worker が正常に登録されているか

**Q: 購読登録に失敗する**
A: 以下を確認してください：

- VAPID 鍵が正しく設定されているか
- 環境変数が読み込まれているか

**Q: 通知送信に失敗する**
A: 以下を確認してください：

- 購読者が登録されているか
- サーバーログでエラー詳細を確認

## 📚 詳細ドキュメント

より詳細な情報は `NOTIFICATION_DOCUMENTATION.md` を参照してください。

## 🤝 サポート

問題が発生した場合は、以下を確認してください：

1. ブラウザのコンソールログ
2. サーバーのログ
3. ネットワークタブでの API 通信状況
